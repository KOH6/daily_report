## はじめに
Udemy テスト

## 学んだこと
* 同値クラステスト
  * すべてのブロックの処理を確認
* 境界値テスト
  * 境界値とその前後をテスト
* テスト技法は以下2点を意識して学ぶことが大事
  * ①どのようにテストケースを減らせるか
  * ②どのように網羅性を確保するか
* テスト観点の広げ方
  * ①具体的な例の「間」「逆」「類推」「外側」を考える
    * １と２の間の1.5
    * 2の逆の-2
    * 1,2から類推して0もやらなきゃ
    * 数値の外側の文字もやらなきゃ
  * ②意地悪な条件を考える
  * ③自分の「知っている」「当たり前」を疑う
* テストの設計アプローチ
  * ①契約によるテスト
    * 事前条件の範囲内だけでテスト。仕様で引数は1〜100と決まっていたらその範囲だけやる。
  * ②防御的テスト
    * 事前条件の範囲外もテスト。
  * どちらのアプローチを取っているかを認識するのが大事
* 欠陥は一つずつ検証する
* 条件が増えると論理が複雑になる。呼応言う場合はテストケースの抜け漏れが発生しやすい。以下の２つで防ぐことができる。
* ①ドメイン分析テスト
  * 複数条件が相互作用を持つ
  * ４つのポイント（on/off/in/out）
  * 境界値テストは実はon/offポイントのテスト
  * ドメインテストマトリクスを使うことで、欠陥を１つずつ検証できる
* ②デシジョンテーブル
  * 複数条件が論理式でつながる
  * デシジョンテーブルは処理によっては圧縮が可能
* 更に条件が増えるとテストケースが膨大になって全て網羅できなくなる。そのため、少ないテストケースで網羅性を確保する方針に切り替える必要がある。
  * これがペア構成テスト
* ペア構成テスト
  * 全ての組み合わせではなく、条件のすべてのペアをテストする手法
  * なぜこれで網羅できるか？
    * ほとんどの欠陥は「シングルモード欠陥」「ダブルモード欠陥」だから。
  * ペア構成テストで70~85%程度のバグを検出できる。網羅性は不十分。
  * **重要な組み合わせやバグがありそうな組み合わせは追加でテストすること。**
* 直交表
  * すべてのペアを抜けもれなく調べる表。直交表で大幅にテストケース削減ができる。
  * 直交表は自作しない。目的に応じて適切な直交表を選ぶ。
  * 直交表には`L4(2^3)`のような表記方法がある。
  * 直交表に完全一致するものがないなら、少し大きめの直交表を選ぶ。
* 直交表を使わずに全ペアのテストケースを作成できるツールもある。（PICT等）
* 状態遷移テスト
  * 現在の状態とその繊維によって振る舞いが変わるソフトをテストするためのもの
  * 状態遷移は状態、遷移、イベントの３つからなる。
  * 全ての遷移をテストすると、全ての状態もテストされている。
  * 状態遷移図は簡易的なものなので、N/Aなものをテストしたい場合は状態遷移表を作って抜け漏れなくしたい。
  * 状態遷移表を使うと仕様の抜け漏れもチェックできる。
  * Nスイッチカバレッジ
    * 状態遷移表では1段階遷移しかテストできない。遷移がN段階行われる場合についてのテストがNスイッチカバレッジ。
    * Nスイッチカバレッジを求めるには、①単一操作の関係行列表を作る、②①の表をN+1乗するを行う。
* カバレッジ
  * ブラックボックステスト
    * コードを見ずに仕様からテストケースを作る
  * ホワイトボックステスト
    * コード内部のロジックを考慮してテストケースを作成する
    * ホワイトボックステストはデータフローテストと制御フローテストに分かれる
      * データフローテスト
        * 最近ではIDEが自動的にやってくれる。
        * 未定義の変数を使用している等
      * 制御フローテスト
        * コード中の処理がどれだけ実行されたか？を基準にするテスト
  * カバレッジとは、「テスト可能なコードのうち、実際にテストされたコードの割合」のこと
  * テストの網羅性の高さ（カバレッジレベル）によりカバレッジの求め方が異なる。
  * レベル1：statement coverage(C0)
    * 実行可能な行のうち何行を実行したか
  * レベル2：decision coverage(C1)
    * 判定の分岐をどれだけ網羅したか
    * decision coverage100%を達成すると、statement coverage100%も達成できる
  * レベル3：condition coverage(C2)
    * 判定の中の条件式の真偽をどれだけ網羅したか
    * condition coverage100%だからといって、decision coverage100%と、statement coverage100%が保証されるわけではない
  * レベル4：multiple condition coverage(MCC)
    * 条件式の真偽の組み合わせをどれだけ網羅したか
    * 必要なテストケースが倍々で増えて行ってしまうのが特徴。
    * 網羅性は高いが、テストケースが必要以上に増えるため、「レベル5のMC/DC」が使われることが多い。
  * レベル5：MC/DC(modified condition / decision coverage)
    * レベル4のmultiple condition coverageを改良して必要テストケースを削減したもの
    * 少ないテストケースでcondition coverage100%とdecision coverage100%を達成できる
    * 「条件式の数+1」の数だけテストケースを用意すれば良い
    * 航空機ソフトウェアのような、バグが致命的になるソフトウェアになる（ミッションクリティカル）ソフトウェアに採用されるカバレッジレベル
  * ミッションクリティカル出ないWebアプリはC0かC1が基準になることが多い
* カバレッジの特徴
  * ①カバレッジが高くとも、品質を保証しているとは限らない
  * ②カバレッジを100%に近づけるほど、バグ検出の費用対効果が下がる
  * ③カバレッジの数値がテストの目的にすり替わりがち
* カバレッジの活用法
  * ①テストケースはカバレッジでなく、テスト技法の考え方をもとにする
    * カバレッジはあくまでテスト技法の補助の立ち位置
  * ②100%のカバレッジを目指さず、85%程度のカバレッジを努力目標にする
    * 静的型付け言語より動的型付け言語のほうが基準カバレッジを高くすることが多い
    * ユーザに使ってもらってバグを検出する方向性もあり
* テストの目的
  * テストは少しでもバグを発見して品質を向上させるもの
  * その際、なるべく少ないテストケースで多くのバグを見つけることが大事
* 品質の向上ですら手段
  * 品質の向上はソフトウェアでビジネスを成功させる手段
* テスト技法は実際にやらないと身につかない