# 2024-02-10 日報

## 取り組んだ課題一覧

- Go 課題 1~6
- 各課題の要件確認
- 求人サイトプロフ整備作業

## わかったこと

### Go

- go でのシングルクオートは、Rune という 型を扱うらしい。文字列を使う際はダブルクオートを使う。
- `[...]interface{}{1, "2", 10, "11"}`のように型指定することで複数の型が含まれたスライスを定義できる。
- `str := fmt.Sprintf("%02d", s)`とするとフォーマット指定で０埋めできて楽

> Go におけるすべての変数は「型」を備えます。変数の型は、大きく分けると「値型」「参照型」「ポインタ型」の 3 種類に分かれます。 「値型」は C や Java における値型と同様に整数や実数といった「値」そのものを格納する変数です。 「参照型」は少し特殊で、Go では「スライス」「マップ」「チャネル」という 3 つのデータ構造のいずれかを指し示す変数の型になります。
> 松尾愛賀. スターティング Go 言語 (p.56). 翔泳社. Kindle 版.

> 構造体は値型です。したがって、関数の引数として構造体を渡した場合は、構造体のコピーが生成され、その構造体が関数によって処理されて、元の構造体には何の影響も与えることができません。
> 松尾愛賀. スターティング Go 言語 (p.220). 翔泳社. Kindle 版.

> Go には、特殊なデータ構造を備えた「参照型」という型が定義されています。標準で「スライス（slice）」、「マップ（map）」、「チャネル（channel）」の 3 つが定義されており、各々の参照型には強力な機能が備わっています。本章では、これら各参照型の使用方法について解説を行います。
> 松尾愛賀. スターティング Go 言語 (p.158). 翔泳社. Kindle 版.

- `"slices"`の標準パッケージを import すれば`Contains`メソッドでスライス内の存在判定が可能

```Go
if (slices.Contains(converted, v)) {
    continue
}
```

- 構造体のスライスで各要素の変更を反映させたい場合は古典的 for を使用する。

> このコードの実行結果はどうなるか予想してください。

ループで設定した Age=44 に書き換わらず、`[{tarou 33} {zirou 22} {itirou 11}]%`のままで出力される。

> 実際に実行してなぜこのような挙動になるのかを説明してください。

元のコードは以下のように範囲節による for で記述されている。users は User 型の構造体のスライスである。
この場合、以下のように値が設定される。

1. users はスライスであるため参照型である。最初のループで、変数 users の参照をたどり 1 番目の要素の user の値が変数 user に格納される。
2. user は構造体であるため、変数 user には値型として渡される。つまり、変数 user には**1 番目の要素のコピー**が渡される。
3. ループの中で`user.Age = 44`をするが、変数 user には元のスライスの要素と別の実体が格納されている。そのため、元のスライス内の user に変化はなく、次のループに入る前に変数 user が捨てられる。
4. 同様にして 2 回目以降のループが回る。当然、ループが回った後に元のスライスの各要素は更新されていないため、Age が 44 に書き換わることはない。

```
for _, user := range users {
	user.Age = 44
}
```

> また、正しいと思われる挙動にするための修正をしてください。

修正後のコードを push しております。古典的 for で記述した場合は以下のような挙動になるため、意図通りに書き換わる。

1. users はスライスであるため参照型である。最初のループで、users[0]を指定することで変数 users の参照をたどり 1 番目の要素の user の実体を直接見に行くことができる。
2. 意図通りにならないコードとの決定的な違いは、**構造体のコピーを取って変数に格納しているわけではなく、スライスの要素の値そのものを参照している**ことにある。
3. そのため、古典的 for を用いて`users[i].Age = 44`で書き換えた場合には、元のスライスの要素を直接変更できる。

```
for i := 0; i < len(users); i++ {
	users[i].Age = 44
}
```

## 次やること

- Next.js
  - 書籍閲覧
  - アウトプット課題
    - 実装
- NoSQL
- CICD
- AWS 初級
- デプロイ
- Terraform
- アジャイル開発
- 自作サービス作成

## 感じたこと

- Go の構文にまだ慣れていない。

## 学習時間

- Today: 8h
  - 転職活動に 1h
- Total: 643.0h
